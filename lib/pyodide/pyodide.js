let Module={};function setStandardStreams(e,r,t){r&&(Module.print=r),t&&(Module.printErr=t),e&&Module.preRun.push((function(){Module.FS.init(function(e){const r=new TextEncoder;let t=new Uint8Array(0),o=-1;return function(){try{if(-1===o){let l=e();if(null==l)return null;if("string"!=typeof l)throw new TypeError(`Expected stdin to return string, null, or undefined, got type ${typeof l}.`);l.endsWith("\n")||(l+="\n"),t=r.encode(l),o=0}if(o<t.length){let e=t[o];return o++,e}return o=-1,null}catch(e){throw console.error("Error thrown in stdin:"),console.error(e),e}}}(e),null,null)}))}Module.noImageDecoding=!0,Module.noAudioDecoding=!0,Module.noWasmDecoding=!1,Module.preloadedWasm={},Module.preRun=[];const IN_NODE="undefined"!=typeof process&&process.release&&"node"===process.release.name&&void 0===process.browser;let baseURL;const package_uri_regexp=/^.*?([^\/]*)\.js$/;function _uri_to_package_name(e){let r=package_uri_regexp.exec(e);if(r)return r[1].toLowerCase()}let loadScript;if(globalThis.document)loadScript=async e=>await import(e);else if(globalThis.importScripts)loadScript=async e=>{globalThis.importScripts(e)};else{if(!IN_NODE)throw new Error("Cannot determine runtime environment");{const e=import("path").then((e=>e.default)),r=import("node-fetch").then((e=>e.default)),t=import("vm").then((e=>e.default));loadScript=async o=>{if(o.includes("://")){const e=await r;(await t).runInThisContext(await(await e(o)).text())}else{const r=await e;await import(r.resolve(o))}}}}function addPackageToLoad(e,r){if(e=e.toLowerCase(),!r.has(e)&&(r.set(e,"default channel"),void 0===loadedPackages[e]))for(let t of Module.packages[e].depends)addPackageToLoad(t,r)}function recursiveDependencies(e,r,t,o){const l=new Map;for(let r of e){const e=_uri_to_package_name(r);l.has(e)&&l.get(e)!==r?t(`Loading same package ${e} from ${r} and ${l.get(e)}`):void 0===e?(r=r.toLowerCase(),r in Module.packages?addPackageToLoad(r,l):t(`Skipping unknown package '${r}'`)):l.set(e,r)}if(o){let e=new Map;for(let r of l){let t=r[0];Module.packages[t].shared_library&&e.set(t,l.get(t))}return e}return l}function waitRunDependency(){const e=new Promise((e=>{Module.monitorRunDependencies=r=>{0===r&&e()}}));return Module.addRunDependency("dummy"),Module.removeRunDependency("dummy"),e}async function _loadPackage(e,r,t){let o=recursiveDependencies(e,0,t);if(Module.locateFile_packagesToLoad=o,0===o.size)return Promise.resolve("No new packages to load");r(`Loading ${Array.from(o.keys()).join(", ")}`);let l=[];for(let[e,a]of o){let i=loadedPackages[e];if(void 0!==i){if(i===a||"default channel"===a){r(`${e} already loaded from ${i}`);continue}t(`URI mismatch, attempting to load package ${e} from ${a} while it is already loaded from ${i}. To override a dependency, load the custom package first.`);continue}let n=Module.packages[e]&&Module.packages[e].name||e,d="default channel"===a?`${baseURL}${n}.js`:a;r(`Loading ${e} from ${d}`),l.push(loadScript(d).catch((r=>{t(`Couldn't load package from URL ${d}`,r),o.delete(e)})))}try{await Promise.all(l).then(waitRunDependency)}finally{delete Module.monitorRunDependencies}let a,i=[];for(let[e,r]of o)loadedPackages[e]=r,i.push(e);a=i.length>0?`Loaded ${i.join(", ")}`:"No packages loaded",Module.reportUndefinedSymbols(),r(a),Module.importlib.invalidate_caches()}Module.locateFile=function(e){let r=e.replace(/\.data$/,"");const t=Module.locateFile_packagesToLoad;if(t&&t.has(r)){let e=t.get(r);if("default channel"!=e)return e.replace(/\.js$/,".data")}return baseURL+e};let sharedLibraryWasmPlugin,origWasmPlugin,wasmPluginIndex,_package_lock=Promise.resolve(),loadedPackages={};function useSharedLibraryWasmPlugin(){sharedLibraryWasmPlugin||function(){for(let e in Module.preloadPlugins)if(Module.preloadPlugins[e].canHandle("test.so")){origWasmPlugin=Module.preloadPlugins[e],wasmPluginIndex=e;break}sharedLibraryWasmPlugin={canHandle:origWasmPlugin.canHandle,handle(e,r,t,o){origWasmPlugin.handle(e,r,t,o),origWasmPlugin.asyncWasmLoadPromise=(async()=>{await origWasmPlugin.asyncWasmLoadPromise,Module.loadDynamicLibrary(r,{global:!0,nodelete:!0})})()}}}(),Module.preloadPlugins[wasmPluginIndex]=sharedLibraryWasmPlugin}function restoreOrigWasmPlugin(){Module.preloadPlugins[wasmPluginIndex]=origWasmPlugin}async function loadPackage(e,r,t){if(Module.isPyProxy(e)){let r;try{r=e.toJs()}finally{e.destroy()}e=r}Array.isArray(e)||(e=[e]);let o=[];try{let r=recursiveDependencies(e,0,t,!0);for(let e of r)o.push(e[0])}catch(e){}let l=await async function(){let e,r=_package_lock;return _package_lock=new Promise((r=>e=r)),await r,e}();try{useSharedLibraryWasmPlugin(),await _loadPackage(o,r||console.log,t||console.error),restoreOrigWasmPlugin(),await _loadPackage(e,r||console.log,t||console.error)}finally{restoreOrigWasmPlugin(),l()}}function isPyProxy(e){return!!e&&void 0!==e.$$&&"PyProxy"===e.$$.type}Module.isPyProxy=isPyProxy,globalThis.FinalizationRegistry?Module.finalizationRegistry=new FinalizationRegistry((([e,r])=>{r.leaked=!0,pyproxy_decref_cache(r);try{Module._Py_DecRef(e)}catch(e){Module.fatal_error(e)}})):Module.finalizationRegistry={register(){},unregister(){}};let trace_pyproxy_alloc,trace_pyproxy_dealloc,pyproxy_alloc_map=new Map;function _getPtr(e){let r=e.$$.ptr;if(null===r)throw new Error(e.$$.destroyed_msg);return r}Module.pyproxy_alloc_map=pyproxy_alloc_map,Module.enable_pyproxy_allocation_tracing=function(){trace_pyproxy_alloc=function(e){pyproxy_alloc_map.set(e,Error().stack)},trace_pyproxy_dealloc=function(e){pyproxy_alloc_map.delete(e)}},Module.disable_pyproxy_allocation_tracing=function(){trace_pyproxy_alloc=function(e){},trace_pyproxy_dealloc=function(e){}},Module.disable_pyproxy_allocation_tracing(),Module.pyproxy_new=function(e,r){let t,o=Module._pyproxy_getflags(e),l=Module.getPyProxyClass(o);256&o?(t=Reflect.construct(Function,[],l),delete t.length,delete t.name,t.prototype=void 0):t=Object.create(l.prototype),r||(r={cacheId:Module.hiwire.new_value(new Map),refcnt:0}),r.refcnt++,Object.defineProperty(t,"$$",{value:{ptr:e,type:"PyProxy",cache:r}}),Module._Py_IncRef(e);let a=new Proxy(t,PyProxyHandlers);return trace_pyproxy_alloc(a),Module.finalizationRegistry.register(a,[e,r],a),a};let pyproxyClassMap=new Map;function pyproxy_decref_cache(e){if(e&&(e.refcnt--,0===e.refcnt)){let r=Module.hiwire.pop_value(e.cacheId);for(let t of r.values()){const r=Module.hiwire.pop_value(t);e.leaked||Module.pyproxy_destroy(r,"This borrowed attribute proxy was automatically destroyed in the process of destroying the proxy it was borrowed from. Try using the 'copy' method.")}}}Module.getPyProxyClass=function(e){let r=pyproxyClassMap.get(e);if(r)return r;let t={};for(let[r,o]of[[1,PyProxyLengthMethods],[2,PyProxyGetItemMethods],[4,PyProxySetItemMethods],[8,PyProxyContainsMethods],[16,PyProxyIterableMethods],[32,PyProxyIteratorMethods],[64,PyProxyAwaitableMethods],[128,PyProxyBufferMethods],[256,PyProxyCallableMethods]])e&r&&Object.assign(t,Object.getOwnPropertyDescriptors(o.prototype));t.constructor=Object.getOwnPropertyDescriptor(PyProxyClass.prototype,"constructor"),Object.assign(t,Object.getOwnPropertyDescriptors({$$flags:e}));let o=Object.create(PyProxyClass.prototype,t);function l(){}return l.prototype=o,pyproxyClassMap.set(e,l),l},Module.PyProxy_getPtr=_getPtr,Module.pyproxy_destroy=function(e,r){if(null===e.$$.ptr)return;let t=_getPtr(e);Module.finalizationRegistry.unregister(e),r=r||"Object has already been destroyed";let o,l=e.type;try{o=e.toString()}catch(e){if(e.pyodide_fatal_error)throw e}e.$$.ptr=null,r+=`\nThe object was of type "${l}" and `,r+=o?`had repr "${o}"`:"an error was raised when trying to generate its repr",e.$$.destroyed_msg=r,pyproxy_decref_cache(e.$$.cache);try{Module._Py_DecRef(t),trace_pyproxy_dealloc(e)}catch(e){Module.fatal_error(e)}},Module.callPyObjectKwargs=function(e,...r){let t=r.pop(),o=r.length,l=Object.keys(t),a=Object.values(t),i=l.length;r.push(...a);let n,d=Module.hiwire.new_value(r),u=Module.hiwire.new_value(l);try{n=Module.__pyproxy_apply(e,d,o,u,i)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(d),Module.hiwire.decref(u)}return 0===n&&Module._pythonexc2js(),Module.hiwire.pop_value(n)},Module.callPyObject=function(e,...r){return Module.callPyObjectKwargs(e,...r,{})};class PyProxyClass{constructor(){throw new TypeError("PyProxy is not a constructor")}get[Symbol.toStringTag](){return"PyProxy"}get type(){let e=_getPtr(this);return Module.hiwire.pop_value(Module.__pyproxy_type(e))}toString(){let e,r=_getPtr(this);try{e=Module.__pyproxy_repr(r)}catch(e){Module.fatal_error(e)}return 0===e&&Module._pythonexc2js(),Module.hiwire.pop_value(e)}destroy(e){Module.pyproxy_destroy(this,e)}copy(){let e=_getPtr(this);return Module.pyproxy_new(e,this.$$.cache)}toJs({depth:e=-1,pyproxies:r,create_pyproxies:t=!0,dict_converter:o}={}){let l,a,i=_getPtr(this),n=0;a=t?r?Module.hiwire.new_value(r):Module.hiwire.new_value([]):0,o&&(n=Module.hiwire.new_value(o));try{l=Module._python2js_custom_dict_converter(i,e,a,n)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(a),Module.hiwire.decref(n)}return 0===l&&Module._pythonexc2js(),Module.hiwire.pop_value(l)}supportsLength(){return!!(1&this.$$flags)}supportsGet(){return!!(2&this.$$flags)}supportsSet(){return!!(4&this.$$flags)}supportsHas(){return!!(8&this.$$flags)}isIterable(){return!!(48&this.$$flags)}isIterator(){return!!(32&this.$$flags)}isAwaitable(){return!!(64&this.$$flags)}isBuffer(){return!!(128&this.$$flags)}isCallable(){return!!(256&this.$$flags)}}class PyProxyLengthMethods{get length(){let e,r=_getPtr(this);try{e=Module._PyObject_Size(r)}catch(e){Module.fatal_error(e)}return-1===e&&Module._pythonexc2js(),e}}class PyProxyGetItemMethods{get(e){let r,t=_getPtr(this),o=Module.hiwire.new_value(e);try{r=Module.__pyproxy_getitem(t,o)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(o)}if(0===r){if(!Module._PyErr_Occurred())return;Module._pythonexc2js()}return Module.hiwire.pop_value(r)}}class PyProxySetItemMethods{set(e,r){let t,o=_getPtr(this),l=Module.hiwire.new_value(e),a=Module.hiwire.new_value(r);try{t=Module.__pyproxy_setitem(o,l,a)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(l),Module.hiwire.decref(a)}-1===t&&Module._pythonexc2js()}delete(e){let r,t=_getPtr(this),o=Module.hiwire.new_value(e);try{r=Module.__pyproxy_delitem(t,o)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(o)}-1===r&&Module._pythonexc2js()}}class PyProxyContainsMethods{has(e){let r,t=_getPtr(this),o=Module.hiwire.new_value(e);try{r=Module.__pyproxy_contains(t,o)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(o)}return-1===r&&Module._pythonexc2js(),1===r}}class PyProxyIterableMethods{[Symbol.iterator](){let e,r=_getPtr(this),t={};try{e=Module._PyObject_GetIter(r)}catch(e){Module.fatal_error(e)}0===e&&Module._pythonexc2js();let o=function*(e,r){try{let t;for(;t=Module.__pyproxy_iter_next(e);)yield Module.hiwire.pop_value(t)}catch(e){Module.fatal_error(e)}finally{Module.finalizationRegistry.unregister(r),Module._Py_DecRef(e)}Module._PyErr_Occurred()&&Module._pythonexc2js()}(e,t);return Module.finalizationRegistry.register(o,[e,void 0],t),o}}class PyProxyIteratorMethods{[Symbol.iterator](){return this}next(e){let r,t,o=Module.hiwire.new_value(e);try{r=Module.__pyproxyGen_Send(_getPtr(this),o),t=0===r,t&&(r=Module.__pyproxyGen_FetchStopIterationValue())}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(o)}return t&&0===r&&Module._pythonexc2js(),{done:t,value:Module.hiwire.pop_value(r)}}}let PyProxyHandlers={isExtensible:()=>!0,has:(e,r)=>!!Reflect.has(e,r)||"symbol"!=typeof r&&(r.startsWith("$")&&(r=r.slice(1)),function(e,r){let t,o=_getPtr(e),l=Module.hiwire.new_value(r);try{t=Module.__pyproxy_hasattr(o,l)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(l)}return-1===t&&Module._pythonexc2js(),0!==t}(e,r)),get(e,r){if(r in e||"symbol"==typeof r)return Reflect.get(e,r);r.startsWith("$")&&(r=r.slice(1));let t=function(e,r){let t,o=_getPtr(e),l=Module.hiwire.new_value(r),a=e.$$.cache.cacheId;try{t=Module.__pyproxy_getattr(o,l,a)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(l)}return 0===t&&Module._PyErr_Occurred()&&Module._pythonexc2js(),t}(e,r);return 0!==t?Module.hiwire.pop_value(t):void 0},set(e,r,t){let o=Object.getOwnPropertyDescriptor(e,r);if(o&&!o.writable)throw new TypeError(`Cannot set read only field '${r}'`);return"symbol"==typeof r?Reflect.set(e,r,t):(r.startsWith("$")&&(r=r.slice(1)),function(e,r,t){let o,l=_getPtr(e),a=Module.hiwire.new_value(r),i=Module.hiwire.new_value(t);try{o=Module.__pyproxy_setattr(l,a,i)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(a),Module.hiwire.decref(i)}-1===o&&Module._pythonexc2js()}(e,r,t),!0)},deleteProperty(e,r){let t=Object.getOwnPropertyDescriptor(e,r);if(t&&!t.writable)throw new TypeError(`Cannot delete read only field '${r}'`);return"symbol"==typeof r?Reflect.deleteProperty(e,r):(r.startsWith("$")&&(r=r.slice(1)),function(e,r){let t,o=_getPtr(e),l=Module.hiwire.new_value(r);try{t=Module.__pyproxy_delattr(o,l)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(l)}-1===t&&Module._pythonexc2js()}(e,r),!t||t.configurable)},ownKeys(e){let r,t=_getPtr(e);try{r=Module.__pyproxy_ownKeys(t)}catch(e){Module.fatal_error(e)}0===r&&Module._pythonexc2js();let o=Module.hiwire.pop_value(r);return o.push(...Reflect.ownKeys(e)),o},apply:(e,r,t)=>e.apply(r,t)};class PyProxyAwaitableMethods{_ensure_future(){if(this.$$.promise)return this.$$.promise;let e,r,t,o=_getPtr(this),l=new Promise(((t,o)=>{e=t,r=o})),a=Module.hiwire.new_value(e),i=Module.hiwire.new_value(r);try{t=Module.__pyproxy_ensure_future(o,a,i)}catch(e){Module.fatal_error(e)}finally{Module.hiwire.decref(i),Module.hiwire.decref(a)}return-1===t&&Module._pythonexc2js(),this.$$.promise=l,this.destroy(),l}then(e,r){return this._ensure_future().then(e,r)}catch(e){return this._ensure_future().catch(e)}finally(e){return this._ensure_future().finally(e)}}class PyProxyCallableMethods{apply(e,r){return Module.callPyObject(_getPtr(this),...r)}call(e,...r){return Module.callPyObject(_getPtr(this),...r)}callKwargs(...e){if(0===e.length)throw new TypeError("callKwargs requires at least one argument (the key word argument object)");let r=e[e.length-1];if(void 0!==r.constructor&&"Object"!==r.constructor.name)throw new TypeError("kwargs argument is not an object");return Module.callPyObjectKwargs(_getPtr(this),...e)}}PyProxyCallableMethods.prototype.prototype=Function.prototype;let type_to_array_map=new Map([["i8",Int8Array],["u8",Uint8Array],["u8clamped",Uint8ClampedArray],["i16",Int16Array],["u16",Uint16Array],["i32",Int32Array],["u32",Uint32Array],["i32",Int32Array],["u32",Uint32Array],["i64",globalThis.BigInt64Array],["u64",globalThis.BigUint64Array],["f32",Float32Array],["f64",Float64Array],["dataview",DataView]]);class PyProxyBufferMethods{getBuffer(e){let r;if(e&&(r=type_to_array_map.get(e),void 0===r))throw new Error(`Unknown type ${e}`);let t,o=Module.HEAPU32,l=Module.stackSave(),a=Module.stackAlloc(o[0+(Module._buffer_struct_size>>2)]),i=_getPtr(this);try{t=Module.__pyproxy_get_buffer(a,i)}catch(e){Module.fatal_error(e)}-1===t&&Module._pythonexc2js();let n=o[0+(a>>2)],d=o[1+(a>>2)],u=o[2+(a>>2)],s=!!o[3+(a>>2)],c=o[4+(a>>2)],y=o[5+(a>>2)],p=Module.hiwire.pop_value(o[6+(a>>2)]),_=Module.hiwire.pop_value(o[7+(a>>2)]),f=o[8+(a>>2)],h=!!o[9+(a>>2)],M=!!o[10+(a>>2)],g=Module.UTF8ToString(c);Module.stackRestore(l);let P=!1;try{let e=!1;void 0===r&&([r,e]=Module.processBufferFormatString(g," In this case, you can pass an explicit type argument."));let t=parseInt(r.name.replace(/[^0-9]/g,""))/8||1;if(e&&t>1)throw new Error("Javascript has no native support for big endian buffers. In this case, you can pass an explicit type argument. For instance, `getBuffer('dataview')` will return a `DataView`which has native support for reading big endian data. Alternatively, toJs will automatically convert the buffer to little endian.");let l=u-d;if(0!==l&&(n%t!=0||d%t!=0||u%t!=0))throw new Error(`Buffer does not have valid alignment for a ${r.name}`);let a,i=l/t,c=(n-d)/t;a=0===l?new r:new r(o.buffer,d,i);for(let e of _.keys())_[e]/=t;return P=!0,Object.create(PyBuffer.prototype,Object.getOwnPropertyDescriptors({offset:c,readonly:s,format:g,itemsize:y,ndim:p.length,nbytes:l,shape:p,strides:_,data:a,c_contiguous:h,f_contiguous:M,_view_ptr:f,_released:!1}))}finally{if(!P)try{Module._PyBuffer_Release(f),Module._PyMem_Free(f)}catch(e){Module.fatal_error(e)}}}}class PyBuffer{constructor(){throw this.offset,this.readonly,this.format,this.itemsize,this.ndim,this.nbytes,this.shape,this.strides,this.data,this.c_contiguous,this.f_contiguous,new TypeError("PyBuffer is not a constructor")}release(){if(!this._released){try{Module._PyBuffer_Release(this._view_ptr),Module._PyMem_Free(this._view_ptr)}catch(e){Module.fatal_error(e)}this._released=!0,this.data=null}}}let pyodide_py={},globals={};class PythonError{constructor(){this.message}}function runPython(e,r=Module.globals){return Module.pyodide_py.eval_code(e,r)}async function loadPackagesFromImports(e,r,t){let o,l=Module.pyodide_py.find_imports(e);try{o=l.toJs()}finally{l.destroy()}if(0===o.length)return;let a=Module._import_name_to_package_name,i=new Set;for(let e of o)a.has(e)&&i.add(a.get(e));i.size&&await loadPackage(Array.from(i),r,t)}async function runPythonAsync(e,r=Module.globals){return await Module.pyodide_py.eval_code_async(e,r)}function registerJsModule(e,r){Module.pyodide_py.register_js_module(e,r)}function registerComlink(e){Module._Comlink=e}function unregisterJsModule(e){Module.pyodide_py.unregister_js_module(e)}function toPy(e,{depth:r=-1}={}){switch(typeof e){case"string":case"number":case"boolean":case"bigint":case"undefined":return e}if(!e||Module.isPyProxy(e))return e;let t=0,o=0,l=0;try{t=Module.hiwire.new_value(e);try{o=Module.js2python_convert(t,new Map,r)}catch(e){throw e instanceof Module._PropagatePythonError&&Module._pythonexc2js(),e}if(Module._JsProxy_Check(o))return e;l=Module._python2js(o),0===l&&Module._pythonexc2js()}finally{Module.hiwire.decref(t),Module._Py_DecRef(o)}return Module.hiwire.pop_value(l)}function pyimport(e){return Module.importlib.import_module(e)}function unpackArchive(e,r,t){Module._util_module||(Module._util_module=pyimport("pyodide._util")),Module._util_module.unpack_buffer_archive.callKwargs(e,{format:r,extract_dir:t})}function setInterruptBuffer(e){Module.interrupt_buffer=e,Module._set_pyodide_callback(!!e)}function checkInterrupt(){2===Module.interrupt_buffer[0]&&(Module.interrupt_buffer[0]=0,Module._PyErr_SetInterrupt(),Module.runPython(""))}function makePublicAPI(){const e=Module.FS;let r={globals,FS:e,pyodide_py,version:"",loadPackage,loadPackagesFromImports,loadedPackages,isPyProxy,runPython,runPythonAsync,registerJsModule,unregisterJsModule,setInterruptBuffer,checkInterrupt,toPy,pyimport,unpackArchive,registerComlink,PythonError,PyBuffer};return r._module=Module,Module.public_api=r,r}Module.runPython=runPython,Module.runPythonAsync=runPythonAsync,Module.saveState=()=>Module.pyodide_py._state.save_state(),Module.restoreState=e=>Module.pyodide_py._state.restore_state(e),Module.dump_traceback=function(){Module.__Py_DumpTraceback(1,Module._PyGILState_GetThisThreadState())};let runPythonInternal_dict,fatal_error_occurred=!1;function finalizeBootstrap(e){runPythonInternal_dict=Module._pyodide._base.eval_code("{}"),Module.importlib=Module.runPythonInternal("import importlib; importlib");let r=Module.importlib.import_module;Module.sys=r("sys"),Module.sys.path.insert(0,e.homedir);let t=Module.runPythonInternal("import __main__; __main__.__dict__"),o=Module.runPythonInternal("import builtins; builtins.__dict__");var l;Module.globals=(l=o,new Proxy(t,{get:(e,r)=>"get"===r?r=>{let t=e.get(r);return void 0===t&&(t=l.get(r)),t}:"has"===r?r=>e.has(r)||l.has(r):Reflect.get(e,r)}));let a=Module._pyodide._importhook;a.register_js_finder(),a.register_js_module("js",e.jsglobals);let i=makePublicAPI();return a.register_js_module("pyodide_js",i),Module.pyodide_py=r("pyodide"),Module.version=Module.pyodide_py.__version__,i.pyodide_py=Module.pyodide_py,i.version=Module.version,i.globals=Module.globals,i}async function loadPyodide(e){if(globalThis.__pyodide_module)throw new Error("Pyodide is already loading.");if(!e.indexURL)throw new Error("Please provide indexURL parameter to loadPyodide");loadPyodide.inProgress=!0,globalThis.__pyodide_module=Module;const r={fullStdLib:!0,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,homedir:"/home/pyodide"};(e=Object.assign(r,e)).indexURL.endsWith("/")||(e.indexURL+="/"),Module.indexURL=e.indexURL;let t=async function(e){let r;if(baseURL=e,IN_NODE){const t=await import("fs/promises"),o=await t.readFile(`${e}packages.json`);r=JSON.parse(o)}else{let t=await fetch(`${e}packages.json`);r=await t.json()}if(!r.packages)throw new Error("Loaded packages.json does not contain the expected key 'packages'.");Module.packages=r.packages,Module._import_name_to_package_name=new Map;for(let e of Object.keys(Module.packages))for(let r of Module.packages[e].imports)Module._import_name_to_package_name.set(r,e)}(e.indexURL),o=async function(e,r){if(IN_NODE){const t=await import("fs/promises");return(await t.readFile(`${e}${r}`)).buffer}{let t=await fetch(`${e}${r}`);return await t.arrayBuffer()}}(e.indexURL,"pyodide_py.tar");var l;setStandardStreams(e.stdin,e.stdout,e.stderr),l=e.homedir,Module.preRun.push((function(){try{Module.FS.mkdirTree(l)}catch(e){console.error(`Error occurred while making a home directory '${l}':`),console.error(e),console.error("Using '/' for a home directory instead"),l="/"}Module.ENV.HOME=l,Module.FS.chdir(l)}));let a=new Promise((e=>Module.postRun=e));const i=`${e.indexURL}pyodide.asm.js`;await loadScript(i),await _createPyodideModule(Module),await a,function(e){let r=Module.FS.open("/pyodide_py.tar","w");Module.FS.write(r,new Uint8Array(e),0,e.byteLength,void 0,!0),Module.FS.close(r);const t=Module.stringToNewUTF8('\nimport shutil\nshutil.unpack_archive("/pyodide_py.tar", "/lib/python3.9/site-packages/")\ndel shutil\nimport importlib\nimportlib.invalidate_caches()\ndel importlib\n    ');if(Module._PyRun_SimpleString(t))throw new Error("OOPS!");Module._free(t),Module.FS.unlink("/pyodide_py.tar")}(await o),Module._pyodide_init();let n=finalizeBootstrap(e);return await t,e.fullStdLib&&await loadPackage(["distutils"]),n.runPython("print('Python initialization complete')"),n}Module.fatal_error=function(e){if(!e.pyodide_fatal_error){if(fatal_error_occurred)return console.error("Recursive call to fatal_error. Inner error was:"),void console.error(e);e.pyodide_fatal_error=!0,fatal_error_occurred=!0,console.error("Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers."),console.error("The cause of the fatal error was:"),Module.inTestHoist?(console.error(e.toString()),console.error(e.stack)):console.error(e);try{Module.dump_traceback();for(let e of Object.keys(Module.public_api))e.startsWith("_")||"version"===e||Object.defineProperty(Module.public_api,e,{enumerable:!0,configurable:!0,get:()=>{throw new Error("Pyodide already fatally failed and can no longer be used.")}});Module.on_fatal&&Module.on_fatal(e)}catch(e){console.error("Another error occurred while handling the fatal error:"),console.error(e)}throw e}},Module.runPythonInternal=function(e){return Module._pyodide._base.eval_code(e,runPythonInternal_dict)},globalThis.loadPyodide=loadPyodide;export{loadPyodide};